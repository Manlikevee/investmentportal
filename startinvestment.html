<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Investment Portal</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>



    <header>
        <div class="container">
            <div class="loginlinks">
                <div class="logo">
                    <a href="index.html"><img src="img/ProduqtEdge Logo.png" alt=""></a>   
                </div>
                <div class="links">
                    <a href="dashboard.html" >Dashboard</a>
                    <a href="investment.html" class="activelink">Investment</a>
                    <a href="">Support</a>

                </div>

                <a href="profile.html" class="avatar">
                    <div class="uname" id="uname">Oluwatosin Ajayi
                       
                            <small>User Account</small>
                        
                    </div>
                    <div class="avatarimg">
                        <img src="img/christopher-campbell-rDEOVtE7vOs-unsplash.jpg" alt=""></div>
                </a>
            </div>
        </div>
    </header>


    <div class="container mydashboard">
 
<br>
<div class="startinv">
 
<div class="investmentform">


    <div class="formheader">Start Investment</div>
    <div class="formbody">

        <p class="ptitle">
            Create Investment Account
        </p>

        <div class="formflex">
            <div class="inputblock">
                <label for="">Principal Amount</label>
                <input type="number" id="amount" oninput="calculate()">
            </div>  

            <div class="inputblock">
                <label for="">Effective Date</label>
                <input type="date" id="edate">
            </div>  

        </div>
       
        
        <div class="formflex">
            <div class="inputblock">
                <label for="">Tenure</label>
                <input type="number" id="tenure" oninput="calculate()">
            </div>  

            <div class="inputblock">
                <label for="">Interest Rate</label>
                <input type="number" id="rate" value="12" readonly oninput="calculate()">
            </div>  

        </div>

               
        <div class="formflex">
            <div class="inputblock">
                <label for="">Maturity Date</label>
                <input type="date" id="mdate">
            </div>  

            <div class="inputblock">
                <label for="">Interest Payable at Maturity</label>
                <input type="number" id="interest" readonly oninput="calculate()">
            </div>  

        </div>

        <div class="formflex">
            <div class="inputblock">
                <label for="">Total Amount Payable at Maturity</label>
                <input type="number" id="amtpay" oninput="calc()">
            </div>  

            <div class="inputblock">
      
            </div>  

        </div>
<div class="formflex">
    <button onclick="store()">Proceed</button>
</div>
       <a href="startinvestmentpreview.html">what next page should look like ?</a>
    </div>
</div>
</div>


    </div>



<!-- investments list is here -->

    <div class="overlay" id="myoverlay">
        <div class="allinvestmentsblock">
    
       
                <div class="addnew_investment">
                      <div class="addinvestment_headtext">
                    <span>Available Investments (9)</span>   
                    <b class="btn-modal-close"  onclick="showinvestmentslists()">x</b>
                    </div>
                    <div class="investmentwrappe" id="myinvestmenttypes">
    
            <!-- simple html for ivestment types -->
                        <div class="addinvestment_body">
                            <div class="addinvestment_gold">
                               Stocks
                            </div>
                          <div class="bodyofwork">
                        A bond is an investment where you lend money to a company, government, and other types of organization. In return, the bond issuer pays you interest for the borrowed money, and, at the same time, repay you the original amount you paid for the bond (principal).
            
                            <div class="addinvest_btn">
                          <a href="startinvestment.html">
                            <button>Invest</button> 
                          </a>
                         
            
                            </div>
                          </div>
            
                        </div>
            
    
                    </div>
    
                </div>
    
          
        </div>
    </div>
    <script src="script.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>


    <script>
 

    function calculate(){
        const amount = document.getElementById('amount').value;
        const tenure = document.getElementById('tenure').value; 
        const rate = document.getElementById('rate').value;
        const edate = document.getElementById('edate').value;

        const mdate = document.getElementById('mdate').value


        const simpleinterest = parseInt(amount) * parseInt(rate) * parseInt(tenure) / 100;
  
          document.getElementById('interest').value = simpleinterest;
          calc()
           }

    function calc()
    {
        const amount = document.getElementById('amount').value;
        const interest = document.getElementById('interest').value;


        const totalamount = parseInt(amount) + parseInt(interest) 

      
  
  document.getElementById('amtpay').value = totalamount
    }
  
  
   

  
function investmentdata(){
            var currentURL = new URL(window.location.href);

// Get the value of the 'investid' parameter using URLSearchParams
var investidValue = currentURL.searchParams.get('investmentid');

if (!investidValue){
alert('invalid investment id')
}
else{
    console.log(investidValue)
}
// Log the value to the console

        }investmentdata()

        function store(){
            var currentURL = new URL(window.location.href);

// Get the value of the 'investid' parameter using URLSearchParams
var investidValue = currentURL.searchParams.get('investmentid');
            let invest = [

            ];

const alluserinvestments = localStorage.getItem('Investment details')


if(alluserinvestments){

    invest =  JSON.parse(alluserinvestments) 
}



            let activeuserid= localStorage.getItem('activeuserid');
            const amount = document.getElementById('amount').value;
        const tenure = document.getElementById('tenure').value; 
        const rate = document.getElementById('rate').value;
        const edate = document.getElementById('edate').value;
        const interest = document.getElementById('interest').value;
        const tamount = document.getElementById('amtpay').value

        const mdate = document.getElementById('mdate').value;
        let id_value = Math.floor(Math.random() * 64234345172725) + 1/ 542415 

        const newevent = {
            investmentid: investidValue,
            id:  id_value,
            userid : activeuserid,
    Principal : amount,
    Tenure : tenure,
    Rate : rate,
    Effective_date : edate,
    Maturity_date : mdate,
    Interest : interest,
    totalamount : tamount,
    status: 'pending'
}
        if (amount && tenure && rate && edate && mdate) {
            invest.push(newevent)
            const investment = JSON.stringify(invest);
  localStorage.setItem('Investment details', investment);
  window.location.href= `startinvestmentpreview.html?investmentid=${id_value}`
        } else {
            
        }
        }
    </script>
</body>
</html>