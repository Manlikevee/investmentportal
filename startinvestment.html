<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Investment Portal</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>



    <header>
        <div class="container">
            <div class="loginlinks">
                <div class="logo">
                    <a href="index.html"><img src="img/ProduqtEdge Logo.png" alt=""></a>   
                </div>
                <div class="links">
                    <a href="dashboard.html" >Dashboard</a>
                    <a href="investment.html" class="activelink">Investment</a>
                    <a href="">Support</a>

                </div>

                <a href="profile.html" class="avatar">
                    <div class="uname" id="uname">Oluwatosin Ajayi
                       
                            <small>User Account</small>
                        
                    </div>
                    <div class="avatarimg">
                        <img src="img/christopher-campbell-rDEOVtE7vOs-unsplash.jpg" alt=""></div>
                </a>
            </div>
        </div>
    </header>


    <div class="container mydashboard">
 
<br>
<div class="startinv">
 
<div class="investmentform">


    <div class="formheader">Start Investment</div>
    <div class="formbody">

        <p class="ptitle">
            Create Investment Account
        </p>

        <div class="formflex">
            <div class="inputblock">
                <label for="">Principal Amount</label>
                <input type="number" id="amount" oninput="calculate()">
            </div>  

            <div class="inputblock">
                <label for="">Effective Date</label>
                <input type="date" id="edate">
            </div>  

        </div>
       
        
        <div class="formflex">
            <div class="inputblock">
                <label for="">Tenure</label>
                <input type="number" id="tenure" oninput="calculate()">
            </div>  

            <div class="inputblock">
                <label for="">Interest Rate</label>
                <input type="number" id="rate" value="12" readonly oninput="calculate()">
            </div>  

        </div>

               
        <div class="formflex">
            <div class="inputblock">
                <label for="">Maturity Date</label>
                <input type="date" id="mdate">
            </div>  

            <div class="inputblock">
                <label for="">Interest Payable at Maturity</label>
                <input type="number" id="interest" readonly oninput="calculate()">
            </div>  

        </div>

        <div class="formflex">
            <div class="inputblock">
                <label for="">Total Amount Payable at Maturity</label>
                <input type="number" id="amtpay" oninput="calc()">
            </div>  

            <div class="inputblock">
      
            </div>  

        </div>
<div class="formflex">
    <button onclick="payWithPaystack()">Proceed</button>
</div>
       <a href="startinvestmentpreview.html">what next page should look like ?</a>
    </div>
</div>
</div>


    </div>



<!-- investments list is here -->

    <div class="overlay" id="myoverlay">
        <div class="allinvestmentsblock">
    
       
                <div class="addnew_investment">
                      <div class="addinvestment_headtext">
                    <span>Available Investments (9)</span>   
                    <b class="btn-modal-close"  onclick="showinvestmentslists()">x</b>
                    </div>
                    <div class="investmentwrappe" id="myinvestmenttypes">
    
            <!-- simple html for ivestment types -->
                        <div class="addinvestment_body">
                            <div class="addinvestment_gold">
                               Stocks
                            </div>
                          <div class="bodyofwork">
                        A bond is an investment where you lend money to a company, government, and other types of organization. In return, the bond issuer pays you interest for the borrowed money, and, at the same time, repay you the original amount you paid for the bond (principal).
            
                            <div class="addinvest_btn">
                          <a href="startinvestment.html">
                            <button>Invest</button> 
                          </a>
                         
            
                            </div>
                          </div>
            
                        </div>
            
    
                    </div>
    
                </div>
    
          
        </div>
    </div>
    <script src="script.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>


    <script>
 

    function calculate(){
        const amount = document.getElementById('amount').value;
        const tenure = document.getElementById('tenure').value; 
        const rate = document.getElementById('rate').value;
        const edate = document.getElementById('edate').value;

        const mdate = document.getElementById('mdate').value


        const simpleinterest = parseInt(amount) * parseInt(rate) * parseInt(tenure) / 100;
  
          document.getElementById('interest').value = simpleinterest;
          calc()
           }

    function calc()
    {
        const amount = document.getElementById('amount').value;
        const interest = document.getElementById('interest').value;


        const totalamount = parseInt(amount) + parseInt(interest) 

      
  
  document.getElementById('amtpay').value = totalamount
    }
  
  
    function payWithPaystack() {
        let activeprofile= [];              
let myprofilearray = [];
const email = localStorage.getItem('mail');
myprofilearray =  localStorage.getItem('User details');
Ppofile = JSON.parse(myprofilearray);
         activeprofile = Ppofile.find(detail => detail.mail == email );
  let handler = PaystackPop.setup({
    key: 'pk_test_7c1ec0c9fe734ba2a63d9e3037c4fdb61f05908e', // Replace with your public key
    email:  activeprofile.mail,
    amount: document.getElementById("amount").value * 100,
    ref: ''+Math.floor((Math.random() * 1000000000) + 1), // generates a pseudo-unique reference. Please replace with a reference you generated. Or remove the line entirely so our API will generate one for you
    // label: "Optional string that replaces customer email"
    onClose: function(){
      alert('Window closed.');
    },

    callback: function(response){
        const amount = document.getElementById('amount').value;
        const tenure = document.getElementById('tenure').value;
        const rate = document.getElementById('rate').value;
        const interest = document.getElementById('interest').value;
        const tamount = document.getElementById('amtpay').value

    if (amount && rate && tenure && interest && amtpay) {
        localStorage.setItem('Principal', amount)
        localStorage.setItem('Tenure', tenure)
        localStorage.setItem('Rate', rate)
        localStorage.setItem('Interest', interest)
        localStorage.setItem('Total amount', tamount)
         localStorage.setItem('Effective Date', edate)
          localStorage.setItem('Maturity Date', mdate)
        
    } else {
        
    }
    }
  });

  handler.openIframe();
}

  
  
    </script>
</body>
</html>